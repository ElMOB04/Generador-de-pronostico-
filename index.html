<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title id="titulo-pagina">Generador de Pronóstico Regional</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="generador.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
  <script src="https://unpkg.com/docx@8.2.2/build/docx.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf-autotable.min.js" defer></script>
<script src="https://unpkg.com/docx@8.2.2/build/docx.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js" defer></script>
  <script src="generador.js" defer></script>
  <!-- Librerías necesarias -->
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 id="titulo-pronostico">PRONÓSTICO REGIONAL</h1>
      <select id="region-select">
        <option value="">-- Selecciona la región --</option>
      </select>
    </header>

    <main class="main-content">
        <div class="form-column">
            <section class="card">
                <h2>Datos Generales</h2>
                <div class="form-grid">
                    <div class="form-group"><label for="fecha">Fecha:</label><input type="date" id="fecha"></div>
                    <div class="form-group"><label for="hora">Hora:</label><input type="time" id="hora"></div>
                    <div class="form-group"><label for="pronosticador">Pronosticador</label><input type="text" id="pronosticador" placeholder="Nombre a cargo"></div>
                </div>
                 <div class="form-group"><label for="condiciones">Condiciones Meteorológicas</label><textarea id="condiciones" placeholder="..."></textarea></div>
                 <div class="form-group"><label for="especiales">Condiciones Especiales</label><textarea id="especiales" placeholder="..."></textarea></div>
                 <div class="form-group"><label for="maritimas">Condiciones Marítimas</label><textarea id="maritimas" placeholder="..."></textarea></div>
            </section>
        </div>
        <div class="actions-column">
            <section class="card">
                <h2>Acciones Rápidas</h2>
                <div class="actions-grid">
                    <button class="btn btn-secondary" onclick="colocarHoy()">Usar Fecha Actual</button>
                    <button class="btn btn-warning" onclick="clearForm()">Limpiar Formulario</button>
                    <button class="btn btn-primary" onclick="mostrarOpcionesGenerar()">Generar Reporte</button>
                </div>
            </section>
            <section class="card">
                <h2>Historial</h2>
                <div class="history-controls"><select id="history-select"><option value="">-- Cargar reporte --</option></select><button class="btn btn-secondary" onclick="loadFromHistory()">Cargar</button></div>
                 <div class="history-actions"><button class="btn btn-success" onclick="saveToHistory()">Guardar Actual</button><button class="btn btn-danger" onclick="deleteFromHistory()">Borrar</button></div>
            </section>
        </div>
    </main>

    <!-- TABLA 24 HORAS -->
    <section class="card">
      <h2>Pronóstico para Hoy</h2>
      <div class="table-wrapper">
        <table id="forecast-table-24">
          <thead>
            <tr>
              <th>Provincia</th>
              <th>Mañana</th>
              <th>Tarde</th>
              <th>Noche</th>
              <th>Temperatura (°C)</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- TABLA 48/72 HORAS - REDISEÑADA CON CABECERA DE 2 FILAS -->
    <section class="card">
      <h2>Pronóstico Extendido</h2>
      <div class="table-wrapper">
          <table id="forecast-table-48-72">
              <thead>
              <tr>
                  <th rowspan="2">Provincia</th>
                  <th colspan="2" id="header-48">48 Hrs</th>
                  <th colspan="2" id="header-72">72 Hrs</th>
              </tr>
              <tr>
                  <th>Condición</th>
                  <th>Temperatura (°C)</th>
                  <th>Condición</th>
                  <th>Temperatura (°C)</th>
              </tr>
              </thead>
              <tbody></tbody>
          </table>
      </div>
    </section>
  </div>

  <div id="modal-generar" class="modal">
    <div class="modal-content">
      <span class="close" onclick="cerrarModal()">×</span>
      <h2>Selecciona el Formato</h2>
      <button class="btn btn-primary" onclick="generarPDF()">Descargar PDF</button>
      <button class="btn btn-secondary" onclick="generarWord()">Descargar Word</button>
    </div>
  </div>
</body>
</html>